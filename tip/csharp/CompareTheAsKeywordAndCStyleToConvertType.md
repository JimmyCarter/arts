# C#强制类型转换：as关键字和C风格对比

由于本周临时使用.net做项目，之前对该语言的实际项目不多，掌握不深，突然看到C#即可用C语言风格的强制类型转换，也可以在表达式后面添加`as type`关键字转换，感觉好风骚，所以特地尝试了两把，在此做个总结。

- C风格的`(type)`和`as type`两种方式都能实现强制类型转换
- 推荐使用`as`关键字作为转换方式，更高效更安全

下面是两段C#的程序例子：
```csharp
// 程序1
Object o = new Object();
Array a = o as Array;   // 转换失败，基类转为派生的实例，但不会报错，只会让a值为null
Console.WriteLine(a == null ? "失败" : "成功"); // 输出：失败

// 程序2
Object o = new Object();
Array a = (Array)o; // 到这里直接异常，程序退出
Console.WriteLine(a == null ? "失败" : "成功");
```

从上面两段程序中可以看出，`as`关键字转换，要比括号的方式更安全，当类型转换失败的时候，as并不会报错，而是让目标变量的值为null，而括号方式将在转换时失败抛出异常，如果要保证程序稳定性，在使用括号强制转换的时候，最好写完成异常处理。